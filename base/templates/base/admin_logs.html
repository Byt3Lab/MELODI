{% extends "base/components/layout_admin.html" %}

{% block title %}Logs Admin{% endblock %}

{% block admin_content %}

<div class="container mt-4">

    <h1 class="mb-4 d-flex align-items-center">
        <i class="bi bi-journal-text me-2"></i> Journaux système
    </h1>

    <!-- Filtres -->
    <div class="card shadow-sm mb-4">
        <div class="card-body">

            <form class="row g-3" method="GET" action="/admin/logs">
                
                <!-- Filtre niveau -->
                <div class="col-md-3">
                    <label class="form-label">Niveau</label>
                    <select name="level" class="form-select">
                        <option value="">Tous</option>
                        <option value="info">Info</option>
                        <option value="warning">Warning</option>
                        <option value="error">Erreur</option>
                    </select>
                </div>

                <!-- Filtre utilisateur -->
                <div class="col-md-3">
                    <label class="form-label">Utilisateur</label>
                    <input type="text" name="user" class="form-control" placeholder="nom utilisateur">
                </div>

                <!-- Filtre date -->
                <div class="col-md-3">
                    <label class="form-label">Date</label>
                    <input type="date" name="date" class="form-control">
                </div>

                <!-- Bouton Search -->
                <div class="col-md-3 d-flex align-items-end">
                    <button class="btn btn-primary w-100">
                        <i class="bi bi-search me-1"></i> Filtrer
                    </button>
                </div>

            </form>

        </div>
    </div>


    <!-- Tableau des logs -->
    <div class="card shadow-sm">
        <div class="card-body">

            <table class="table table-hover align-middle">
                <thead>
                    <tr>
                        <th style="width: 160px;">Date</th>
                        <th style="width: 130px;">Niveau</th>
                        <th style="width: 160px;">Utilisateur</th>
                        <th>Action</th>
                        <th>Message</th>
                    </tr>
                </thead>
                <tbody>

                    {% if logs|length == 0 %}
                        <tr>
                            <td colspan="5" class="text-center text-muted py-4">
                                Aucun log trouvé.
                            </td>
                        </tr>
                    {% endif %}

                    {% for log in logs %}
                        <tr>
                            <td>{{ log.date }}</td>

                            <td>
                                {% if log.level == "info" %}
                                    <span class="badge bg-primary">Info</span>
                                {% elif log.level == "warning" %}
                                    <span class="badge bg-warning text-dark">Warning</span>
                                {% elif log.level == "error" %}
                                    <span class="badge bg-danger">Erreur</span>
                                {% else %}
                                    <span class="badge bg-secondary">Autre</span>
                                {% endif %}
                            </td>

                            <td>{{ log.user or "Système" }}</td>
                            <td>{{ log.action }}</td>
                            <td>{{ log.message }}</td>
                        </tr>
                    {% endfor %}

                </tbody>
            </table>

        </div>
    </div>

</div>

{% endblock %}
