<div class="melodi-install">
    <div class="install-container">
        <div class="install-header">
            <h1 class="install-title">Configuration de la Base de Données</h1>
            <p class="install-subtitle">Étape 1 sur 3 : Connexion au serveur de données</p>
        </div>


        <div class="install-body">
            <form @submit="submit">
                <div class="form-group">
                    <label class="form-label">Type de base de données</label>
                    <div class="provider-select">
                        <div class="provider-option" @click="selectProvider('sqlite')">
                            <input type="radio" name="db_provider" value="sqlite" v-model="db_provider">
                            <div class="provider-card"
                                :class="{ 'border-primary': db_provider === 'sqlite', 'bg-blue-50': db_provider === 'sqlite', 'text-blue-700': db_provider === 'sqlite' }">
                                <svg class="provider-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path
                                        d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z">
                                    </path>
                                </svg>
                                <strong>SQLite</strong>
                            </div>
                        </div>
                        <div class="provider-option" @click="selectProvider('postgresql')">
                            <input type="radio" name="db_provider" value="postgresql" v-model="db_provider">
                            <div class="provider-card"
                                :class="{ 'border-primary': db_provider === 'postgresql', 'bg-blue-50': db_provider === 'postgresql', 'text-blue-700': db_provider === 'postgresql' }">
                                <svg class="provider-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"></path>
                                </svg>
                                <strong>PostgreSQL</strong>
                            </div>
                        </div>
                        <div class="provider-option" @click="selectProvider('mysql')">
                            <input type="radio" name="db_provider" value="mysql" v-model="db_provider">
                            <div class="provider-card"
                                :class="{ 'border-primary': db_provider === 'mysql', 'bg-blue-50': db_provider === 'mysql', 'text-blue-700': db_provider === 'mysql' }">
                                <svg class="provider-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <ellipse cx="12" cy="5" rx="9" ry="3"></ellipse>
                                    <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path>
                                    <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path>
                                </svg>
                                <strong>MySQL</strong>
                            </div>
                        </div>
                    </div>
                </div>

                <div v-if="db_provider !== 'sqlite'" class="form-grid">
                    <div class="form-group">
                        <label class="form-label" for="db_host">Hôte</label>
                        <input type="text" id="db_host" class="form-control" v-model="db_host" placeholder="localhost">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="db_port">Port</label>
                        <input type="number" id="db_port" class="form-control" v-model="db_port" placeholder="5432">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="db_user">Utilisateur</label>
                        <input type="text" id="db_user" class="form-control" v-model="db_user" placeholder="postgres">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="db_password">Mot de passe</label>
                        <input type="password" id="db_password" class="form-control" v-model="db_password">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="db_password_confirm">Confirmer le mot de passe</label>
                        <input type="password" id="db_password_confirm" class="form-control"
                            v-model="db_password_confirm">
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label" for="db_name">Nom de la base de données</label>
                    <input type="text" id="db_name" class="form-control" v-model="db_name" placeholder="melodi_db"
                        required>
                </div>

                <div class="security-note">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                    </svg>
                    <div>
                        <strong>Sécurité garantie</strong><br>
                        Vos identifiants sont chiffrés et stockés localement. Ils ne sont jamais partagés.
                    </div>
                </div>

                <div class="actions">
                    <button type="button" class="btn btn-secondary" onclick="history.back()">
                        Retour
                    </button>
                    <button type="submit" class="btn btn-primary" :disabled="loading_btn">
                        <span v-if="loading_btn" class="spinner-border spinner-border-sm me-2" role="status"
                            aria-hidden="true"></span>
                        <span v-else>
                            <span>Continuer l'installation</span>
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M5 12h14M12 5l7 7-7 7"></path>
                            </svg>
                        </span>
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>